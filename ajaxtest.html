<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>jQuery TIPS</title>
    <style>
    img {
        display: block;
    }
    .container{
        display: flex;
        /* flex-direction: row; */
        margin: 0 auto;
        justify-content: center;
    }
    .form{
        height: 300px;
        box-shadow: 0px 3px 10px rgba(0,0,0,.8);
        margin: 20px 50px;
        padding: 20px 30px;
    }
    .wrapper-img{
        margin: 0 50px;
    }
    .img{
        width: 300px;
    }
    </style>
</head>

<body>
    <div class="container">
        <div class="wrapper-img">
            <img id="tops-img" class="img" src="default-tops.png">
            <img id="bottoms-img" class="img" src="./default-bottoms.png">
            <img id="shoes-img" class="img" src="./default-shoes.png">
        </div> 
        <div class="form">
            <h3>トップス</h3>
            <form id="form-tops">
                <div>
                    <label for="keyword">カラー：</label>
                    <input id="keyword" type="text" size="20" name="color" value="ff00ff" />
                    <label for="keyword">タイプ：</label>
                    <input id="type" type="text" size="20" name="type" value="0" />
                    <input id="tops-api" type="button" value="更新" />
                </div>
            </form>
            <h3>ボトムス</h3>
            <form id="form-bottoms">
                <div>
                    <label for="keyword">カラー：</label>
                    <input id="keyword" type="text" size="20" name="color" value="ff00ff" />
                    <label for="keyword">タイプ：</label>
                    <input id="type" type="text" size="20" name="type" value="0" />
                    <input id="bottoms-api" type="button" value="更新" />
                </div>
            </form>
            <h3>シューズ</h3>
            <form id="form-shoes">
                <div>
                    <label for="keyword">カラー：</label>
                    <input id="keyword" type="text" size="20" name="color" value="ff00ff" />
                    <label for="keyword">タイプ：</label>
                    <input id="type" type="text" size="20" name="type" value="0" />
                    <input id="shoes-api" type="button" value="更新" />
                </div>
            </form>
        </div>
    </div>
 

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script>
        $(function () {
            // ［検索］ボタンクリックで検索開始
            $('#tops-api').click(function () {
                const formData = new FormData(document.getElementById('form-tops'));
                const params = new URLSearchParams(formData);
                fetch('http://localhost:3000/api/v1/tops?' + params.toString())
                    .then(response => {
                        return response.text();
                    })
                    .then(body => {
                        var elem = document.getElementById("tops-img");
                        elem.src = body;
                        console.log(body);
                    });
            });
            $('#bottoms-api').click(function () {
                const formData = new FormData(document.getElementById('form-bottoms'));
                const params = new URLSearchParams(formData);
                fetch('http://localhost:3000/api/v1/bottoms?' + params.toString())
                    .then(response => {
                        return response.text();
                    })
                    .then(body => {
                        var elem = document.getElementById("bottoms-img");
                        elem.src = body;
                        console.log(body);
                    });
            });
            $('#shoes-api').click(function () {
                const formData = new FormData(document.getElementById('form-shoes'));
                const params = new URLSearchParams(formData);
                fetch('http://localhost:3000/api/v1/shoes?' + params.toString())
                    .then(response => {
                        return response.text();
                    })
                    .then(body => {
                        var elem = document.getElementById("shoes-img");
                        elem.src = body;
                        console.log(body);
                    });
            });
        });
    </script>
</body>

</html>
